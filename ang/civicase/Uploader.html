<form>
  <fieldset ng-disabled="block.check()">
    <div crm-ui-debug="activity"></div>
    <div crm-ui-debug="uploader.queue.length"></div>

    <div class="clearfix">

      <div class="cc-uploader-detail pull-right" ng-class="{'cc-zero-w': !isUploadActive(), 'cc-zero-h': !isUploadActive()}">

        <div class="form-group">
          <label for="uploadSubject">{{ts('Activity Subject')}}</label>
          <input type="text" class="form-control" id="uploadSubject" placeholder="" ng-model="activity.subject">
        </div>


        <table class="cc-uploader-files">
          <thead>
          <tr>
            <th>{{ts('Name')}}</th>
            <th>{{ts('Size')}}</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat-start="item in uploader.queue">
            <td ng-bind="item.file.name"></td>
            <td civicase-filesize="item.file.size"></td>
            <td><button class="btn btn-sm btn-danger-outline" ng-click="item.remove()">Remove</button></td>
          </tr>
          <tr>
            <td colspan="3">
              <div class="progress progress-striped">
                <div class="progress-bar text-center" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" ng-style="{width: item.progress + '%'}">{{item.progress > 0 ? item.progress + '%' : ''}}</div>
              </div>
            </td>
          </tr>
          <tr ng-repeat-end="">
            <td colspan="3" class="form-group">
              <textarea type="textarea" class="form-control" placeholder="{{ts('Add file description')}}" rows="3" ng-model="item.crmData.description"></textarea>
            </td>
          </tr>
          </tbody>
        </table>

        <div class="clearfix">
          <div class="pull-right">
            <button type="button" class="btn btn-danger-outline" ng-click="deleteActivity()" >
              <span class="btn-icon"><i class="fa fa-times"></i></span> {{ts('Cancel')}}</button>
            <button type="button" class="btn btn-primary" ng-click="saveActivity()" >
              <span class="btn-icon"><i class="fa fa-upload"></i></span> {{ts('Upload')}}</button>
          </div>
        </div>
      </div>

      <div class="center-block">
        <div class="cc-uploader-dropzone"
             ng-class="{'cc-uploader-active': !isUploadActive(), 'cc-uploader-inactive': isUploadActive()}"
             nv-file-drop nv-file-over uploader="uploader">
             <label for="cc-uploader-button">
               <i class="fa fa-cloud-upload"></i><br/>
               {{ts('Drop file here')}}<br/>
               {{ts('or click here to browse')}}<br/>
             </label>
        </div>

        <input id="cc-uploader-button" type="file" multiple
               nv-file-select uploader="uploader" />
      </div>

    </div>

  </fieldset>
</form>
